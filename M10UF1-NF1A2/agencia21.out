+-----------------------------------------+
| L'arxiu resultant es troba al directori |
+-----------------------------------------+
| /tmp/agencia21.out                      |
+-----------------------------------------+
+---------------------+
| current_timestamp() |
+---------------------+
| 2024-10-09 18:55:50 |
+---------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 18:55:50.362 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |       10 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 18:55:51.370 |
+-------------------------+
+-----------------------------------------+
| TRIGGER                                 |
+-----------------------------------------+
| [ RESPOSTA -1- Error Viatge realitzat ] |
+-----------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 18:55:51.377 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------+
| TRIGGER                            |
+------------------------------------+
| [ RESPOSTA -2- Error núm places ]  |
+------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 18:55:52.383 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+----------------------------------+
| TRIGGER                          |
+----------------------------------+
| [ -3- NO RESPOSTA Error Places ] |
+----------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 18:55:53.390 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        8 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------+
| TRIGGER                                        |
+------------------------------------------------+
| [ RESPOSTA -4- Error Supera límit de Places ]  |
+------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 18:55:55.401 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |       50 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------------------+
| TRIGGER                                                    |
+------------------------------------------------------------+
| [ RESPOSTA -5- Error viatge realitzat no es pot eliminar ] |
+------------------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 18:55:57.414 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |       50 |
+-------------+------------+----------+
+------------------------------------------------------------------+
| ----------------------- Finalitzacio --------------------------- |
+------------------------------------------------------------------+
| Joc de Proves                                                    |
+------------------------------------------------------------------+
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| event_time                 | arg                                                                                                                     |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 2024-10-09 18:55:50.356427 | SELECT current_timestamp()                                                                                              |
| 2024-10-09 18:55:50.359980 | DELETE FROM Viatges where Codi = 31                                                                                     |
| 2024-10-09 18:55:50.360947 | DELETE FROM Reserves_Viatges where Codi_Viatge=25 AND NIF_Client='39101006V'                                            |
| 2024-10-09 18:55:50.362059 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 18:55:50.364330 | INSERT INTO Viatges VALUES (31, 'Barcelona', 'New York', 20241110, 20241115, 1200, 10)                                  |
| 2024-10-09 18:55:50.365438 | Select * From Viatges                                                                                                   |
| 2024-10-09 18:55:50.367446 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 18:55:51.370098 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 18:55:51.372044 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 5)                                                                 |
| 2024-10-09 18:55:51.375309 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 18:55:51.375556 | UPDATE Viatges
    SET N_Places = N_Places - NEW.N_Places
    WHERE Codi = NEW.Codi_Viatge                              |
| 2024-10-09 18:55:51.375915 | SELECT '[ RESPOSTA -1- Error Viatge realitzat ]' AS 'TRIGGER'                                                           |
| 2024-10-09 18:55:51.377672 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 18:55:51.379416 | INSERT INTO Reserves_Viatges VALUES(25, '39101006V', 2)                                                                 |
| 2024-10-09 18:55:51.379581 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 18:55:51.379695 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden reservar viatges passats'                               |
| 2024-10-09 18:55:51.379847 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 18:55:52.381598 | SELECT '[ RESPOSTA -2- Error núm places ]' AS 'TRIGGER'                                                                 |
| 2024-10-09 18:55:52.383228 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 18:55:52.384949 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 7)                                                                 |
| 2024-10-09 18:55:52.385135 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 18:55:52.385252 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No hi ha places suficients'                                         |
| 2024-10-09 18:55:52.385393 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 18:55:53.388443 | SELECT '[ -3- NO RESPOSTA Error Places ]' AS 'TRIGGER'                                                                  |
| 2024-10-09 18:55:53.390033 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 18:55:53.391461 | UPDATE Reserves_Viatges SET N_Places=8 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                              |
| 2024-10-09 18:55:53.391892 | Select * From Viatges                                                                                                   |
| 2024-10-09 18:55:53.393706 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 18:55:54.395888 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 18:55:54.398000 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 18:55:55.400290 | SELECT '[ RESPOSTA -4- Error Supera límit de Places ]' AS 'TRIGGER'                                                     |
| 2024-10-09 18:55:55.401928 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 18:55:55.403578 | UPDATE Reserves_Viatges SET N_Places=50 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                             |
| 2024-10-09 18:55:55.404100 | Select * From Viatges                                                                                                   |
| 2024-10-09 18:55:55.405876 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 18:55:56.408284 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 18:55:56.410100 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 18:55:57.412584 | SELECT '[ RESPOSTA -5- Error viatge realitzat no es pot eliminar ]' AS 'TRIGGER'                                        |
| 2024-10-09 18:55:57.414213 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 18:55:57.415942 | DELETE From Reserves_Viatges where Codi_Viatge = 25 and NIF_Client = '35191937M'                                        |
| 2024-10-09 18:55:57.416219 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden eliminar viatges realitzats'                            |
| 2024-10-09 18:55:57.416351 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 18:55:58.418297 | Select * From Viatges                                                                                                   |
| 2024-10-09 18:55:58.420005 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 18:55:58.421634 | SELECT 'Joc de Proves' AS '----------------------- Finalitzacio ---------------------------'                            |
| 2024-10-09 18:55:58.423475 | SELECT event_time, CAST(argument AS CHAR(10000) CHARACTER SET utf8)  as arg  FROM mysql.general_log ORDER BY event_time |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
+-----------------------------------------+
| L'arxiu resultant es troba al directori |
+-----------------------------------------+
| /tmp/agencia21.out                      |
+-----------------------------------------+
+---------------------+
| current_timestamp() |
+---------------------+
| 2024-10-09 19:01:39 |
+---------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:01:39.777 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |       10 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:01:40.785 |
+-------------------------+
+-----------------------------------------+
| TRIGGER                                 |
+-----------------------------------------+
| [ RESPOSTA -1- Error Viatge realitzat ] |
+-----------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:01:40.792 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------+
| TRIGGER                            |
+------------------------------------+
| [ RESPOSTA -2- Error núm places ]  |
+------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:01:41.798 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+----------------------------------+
| TRIGGER                          |
+----------------------------------+
| [ -3- NO RESPOSTA Error Places ] |
+----------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:01:42.806 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        8 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------+
| TRIGGER                                        |
+------------------------------------------------+
| [ RESPOSTA -4- Error Supera límit de Places ]  |
+------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:01:44.817 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |       50 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------------------+
| TRIGGER                                                    |
+------------------------------------------------------------+
| [ RESPOSTA -5- Error viatge realitzat no es pot eliminar ] |
+------------------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:01:46.830 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |       50 |
+-------------+------------+----------+
+------------------------------------------------------------------+
| ----------------------- Finalitzacio --------------------------- |
+------------------------------------------------------------------+
| Joc de Proves                                                    |
+------------------------------------------------------------------+
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| event_time                 | arg                                                                                                                     |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 2024-10-09 19:01:39.772507 | SELECT current_timestamp()                                                                                              |
| 2024-10-09 19:01:39.775546 | DELETE FROM Viatges where Codi = 31                                                                                     |
| 2024-10-09 19:01:39.776444 | DELETE FROM Reserves_Viatges where Codi_Viatge=25 AND NIF_Client='39101006V'                                            |
| 2024-10-09 19:01:39.777971 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:01:39.780623 | INSERT INTO Viatges VALUES (31, 'Barcelona', 'New York', 20241110, 20241115, 1200, 10)                                  |
| 2024-10-09 19:01:39.780923 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:01:39.783002 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:01:40.785474 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:01:40.787278 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 5)                                                                 |
| 2024-10-09 19:01:40.787525 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:01:40.787732 | UPDATE Viatges
    SET N_Places = N_Places - NEW.N_Places
    WHERE Codi = NEW.Codi_Viatge                              |
| 2024-10-09 19:01:40.790902 | SELECT '[ RESPOSTA -1- Error Viatge realitzat ]' AS 'TRIGGER'                                                           |
| 2024-10-09 19:01:40.792527 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:01:40.794085 | INSERT INTO Reserves_Viatges VALUES(25, '39101006V', 2)                                                                 |
| 2024-10-09 19:01:40.794247 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:01:40.794347 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden reservar viatges passats'                               |
| 2024-10-09 19:01:40.794489 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:01:41.797238 | SELECT '[ RESPOSTA -2- Error núm places ]' AS 'TRIGGER'                                                                 |
| 2024-10-09 19:01:41.798963 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:01:41.801437 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 7)                                                                 |
| 2024-10-09 19:01:41.801643 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:01:41.801780 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No hi ha places suficients'                                         |
| 2024-10-09 19:01:41.801967 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:01:42.804164 | SELECT '[ -3- NO RESPOSTA Error Places ]' AS 'TRIGGER'                                                                  |
| 2024-10-09 19:01:42.806207 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:01:42.808195 | UPDATE Reserves_Viatges SET N_Places=8 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                              |
| 2024-10-09 19:01:42.808572 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:01:42.810585 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:01:43.812500 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:01:43.814252 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:01:44.816283 | SELECT '[ RESPOSTA -4- Error Supera límit de Places ]' AS 'TRIGGER'                                                     |
| 2024-10-09 19:01:44.817745 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:01:44.819235 | UPDATE Reserves_Viatges SET N_Places=50 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                             |
| 2024-10-09 19:01:44.819578 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:01:44.821215 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:01:45.823901 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:01:45.825749 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:01:46.828522 | SELECT '[ RESPOSTA -5- Error viatge realitzat no es pot eliminar ]' AS 'TRIGGER'                                        |
| 2024-10-09 19:01:46.830182 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:01:46.831670 | DELETE From Reserves_Viatges where Codi_Viatge = 25 and NIF_Client = '35191937M'                                        |
| 2024-10-09 19:01:46.831924 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden eliminar viatges realitzats'                            |
| 2024-10-09 19:01:46.832043 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:01:47.834127 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:01:47.835718 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:01:47.837580 | SELECT 'Joc de Proves' AS '----------------------- Finalitzacio ---------------------------'                            |
| 2024-10-09 19:01:47.839568 | SELECT event_time, CAST(argument AS CHAR(10000) CHARACTER SET utf8)  as arg  FROM mysql.general_log ORDER BY event_time |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
+-----------------------------------------+
| L'arxiu resultant es troba al directori |
+-----------------------------------------+
| /tmp/agencia21.out                      |
+-----------------------------------------+
+---------------------+
| current_timestamp() |
+---------------------+
| 2024-10-09 19:04:06 |
+---------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:04:06.097 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |       10 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:04:07.105 |
+-------------------------+
+-----------------------------------------+
| TRIGGER                                 |
+-----------------------------------------+
| [ RESPOSTA -1- Error Viatge realitzat ] |
+-----------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:04:07.109 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------+
| TRIGGER                            |
+------------------------------------+
| [ RESPOSTA -2- Error núm places ]  |
+------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:04:08.115 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+----------------------------------+
| TRIGGER                          |
+----------------------------------+
| [ -3- NO RESPOSTA Error Places ] |
+----------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:04:09.121 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------+
| TRIGGER                                        |
+------------------------------------------------+
| [ RESPOSTA -4- Error Supera límit de Places ]  |
+------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:04:11.133 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------------------+
| TRIGGER                                                    |
+------------------------------------------------------------+
| [ RESPOSTA -5- Error viatge realitzat no es pot eliminar ] |
+------------------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:04:13.145 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+------------------------------------------------------------------+
| ----------------------- Finalitzacio --------------------------- |
+------------------------------------------------------------------+
| Joc de Proves                                                    |
+------------------------------------------------------------------+
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| event_time                 | arg                                                                                                                     |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 2024-10-09 19:04:06.091854 | SELECT current_timestamp()                                                                                              |
| 2024-10-09 19:04:06.095669 | DELETE FROM Viatges where Codi = 31                                                                                     |
| 2024-10-09 19:04:06.095979 | DELETE FROM Reserves_Viatges where Codi_Viatge=25 AND NIF_Client='39101006V'                                            |
| 2024-10-09 19:04:06.097239 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:04:06.099146 | INSERT INTO Viatges VALUES (31, 'Barcelona', 'New York', 20241110, 20241115, 1200, 10)                                  |
| 2024-10-09 19:04:06.100335 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:04:06.102682 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:04:07.105369 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:04:07.107130 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 5)                                                                 |
| 2024-10-09 19:04:07.107292 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:04:07.107459 | UPDATE Viatges
    SET N_Places = N_Places - NEW.N_Places
    WHERE Codi = NEW.Codi_Viatge                              |
| 2024-10-09 19:04:07.107619 | SELECT '[ RESPOSTA -1- Error Viatge realitzat ]' AS 'TRIGGER'                                                           |
| 2024-10-09 19:04:07.109088 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:04:07.110470 | INSERT INTO Reserves_Viatges VALUES(25, '39101006V', 2)                                                                 |
| 2024-10-09 19:04:07.110635 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:04:07.110749 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden reservar viatges passats'                               |
| 2024-10-09 19:04:07.110895 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:04:08.113245 | SELECT '[ RESPOSTA -2- Error núm places ]' AS 'TRIGGER'                                                                 |
| 2024-10-09 19:04:08.115354 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:04:08.116968 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 7)                                                                 |
| 2024-10-09 19:04:08.117127 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:04:08.117238 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No hi ha places suficients'                                         |
| 2024-10-09 19:04:08.117352 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:04:09.119349 | SELECT '[ -3- NO RESPOSTA Error Places ]' AS 'TRIGGER'                                                                  |
| 2024-10-09 19:04:09.121108 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:04:09.122742 | UPDATE Reserves_Viatges SET N_Places=8 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                              |
| 2024-10-09 19:04:09.122939 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:04:09.122992 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Supera el límit de places'                                          |
| 2024-10-09 19:04:09.123228 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:04:09.125565 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:04:10.127773 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:04:10.129537 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:04:11.131785 | SELECT '[ RESPOSTA -4- Error Supera límit de Places ]' AS 'TRIGGER'                                                     |
| 2024-10-09 19:04:11.133362 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:04:11.135015 | UPDATE Reserves_Viatges SET N_Places=50 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                             |
| 2024-10-09 19:04:11.135224 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:04:11.135302 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Supera el límit de places'                                          |
| 2024-10-09 19:04:11.135401 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:04:11.136959 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:04:12.139201 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:04:12.140970 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:04:13.143962 | SELECT '[ RESPOSTA -5- Error viatge realitzat no es pot eliminar ]' AS 'TRIGGER'                                        |
| 2024-10-09 19:04:13.145952 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:04:13.147758 | DELETE From Reserves_Viatges where Codi_Viatge = 25 and NIF_Client = '35191937M'                                        |
| 2024-10-09 19:04:13.148046 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden eliminar viatges realitzats'                            |
| 2024-10-09 19:04:13.148162 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:04:14.150082 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:04:14.152087 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:04:14.154104 | SELECT 'Joc de Proves' AS '----------------------- Finalitzacio ---------------------------'                            |
| 2024-10-09 19:04:14.155917 | SELECT event_time, CAST(argument AS CHAR(10000) CHARACTER SET utf8)  as arg  FROM mysql.general_log ORDER BY event_time |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
+-----------------------------------------+
| L'arxiu resultant es troba al directori |
+-----------------------------------------+
| /tmp/agencia21.out                      |
+-----------------------------------------+
+---------------------+
| current_timestamp() |
+---------------------+
| 2024-10-09 19:08:03 |
+---------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:08:03.273 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |       10 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:08:04.279 |
+-------------------------+
+-----------------------------------------+
| TRIGGER                                 |
+-----------------------------------------+
| [ RESPOSTA -1- Error Viatge realitzat ] |
+-----------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:08:04.283 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------+
| TRIGGER                            |
+------------------------------------+
| [ RESPOSTA -2- Error núm places ]  |
+------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:08:05.290 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+----------------------------------+
| TRIGGER                          |
+----------------------------------+
| [ -3- NO RESPOSTA Error Places ] |
+----------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:08:06.296 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------+
| TRIGGER                                        |
+------------------------------------------------+
| [ RESPOSTA -4- Error Supera límit de Places ]  |
+------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:08:08.307 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------------------+
| TRIGGER                                                    |
+------------------------------------------------------------+
| [ RESPOSTA -5- Error viatge realitzat no es pot eliminar ] |
+------------------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:08:10.319 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+------------------------------------------------------------------+
| ----------------------- Finalitzacio --------------------------- |
+------------------------------------------------------------------+
| Joc de Proves                                                    |
+------------------------------------------------------------------+
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| event_time                 | arg                                                                                                                     |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 2024-10-09 19:08:03.267865 | SELECT current_timestamp()                                                                                              |
| 2024-10-09 19:08:03.270872 | DELETE FROM Viatges where Codi = 31                                                                                     |
| 2024-10-09 19:08:03.271184 | DELETE FROM Reserves_Viatges where Codi_Viatge=25 AND NIF_Client='39101006V'                                            |
| 2024-10-09 19:08:03.273265 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:08:03.275046 | INSERT INTO Viatges VALUES (31, 'Barcelona', 'New York', 20241110, 20241115, 1200, 10)                                  |
| 2024-10-09 19:08:03.275428 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:08:03.277010 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:08:04.279358 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:08:04.281346 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 5)                                                                 |
| 2024-10-09 19:08:04.281515 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:08:04.281663 | UPDATE Viatges
    SET N_Places = N_Places - NEW.N_Places
    WHERE Codi = NEW.Codi_Viatge                              |
| 2024-10-09 19:08:04.281981 | SELECT '[ RESPOSTA -1- Error Viatge realitzat ]' AS 'TRIGGER'                                                           |
| 2024-10-09 19:08:04.283784 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:08:04.285264 | INSERT INTO Reserves_Viatges VALUES(25, '39101006V', 2)                                                                 |
| 2024-10-09 19:08:04.285417 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:08:04.285515 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden reservar viatges passats'                               |
| 2024-10-09 19:08:04.285628 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:08:05.288225 | SELECT '[ RESPOSTA -2- Error núm places ]' AS 'TRIGGER'                                                                 |
| 2024-10-09 19:08:05.290658 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:08:05.292372 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 7)                                                                 |
| 2024-10-09 19:08:05.292549 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:08:05.292665 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No hi ha places suficients'                                         |
| 2024-10-09 19:08:05.292836 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:08:06.294918 | SELECT '[ -3- NO RESPOSTA Error Places ]' AS 'TRIGGER'                                                                  |
| 2024-10-09 19:08:06.296445 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:08:06.298022 | UPDATE Reserves_Viatges SET N_Places=8 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                              |
| 2024-10-09 19:08:06.298232 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:08:06.298322 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Supera límit de places'                                             |
| 2024-10-09 19:08:06.298434 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:08:06.300404 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:08:07.302731 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:08:07.304403 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:08:08.306252 | SELECT '[ RESPOSTA -4- Error Supera límit de Places ]' AS 'TRIGGER'                                                     |
| 2024-10-09 19:08:08.307673 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:08:08.309242 | UPDATE Reserves_Viatges SET N_Places=50 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                             |
| 2024-10-09 19:08:08.309439 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:08:08.309502 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Supera límit de places'                                             |
| 2024-10-09 19:08:08.309616 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:08:08.311443 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:08:09.313698 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:08:09.315597 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:08:10.318209 | SELECT '[ RESPOSTA -5- Error viatge realitzat no es pot eliminar ]' AS 'TRIGGER'                                        |
| 2024-10-09 19:08:10.319698 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:08:10.321164 | DELETE From Reserves_Viatges where Codi_Viatge = 25 and NIF_Client = '35191937M'                                        |
| 2024-10-09 19:08:10.321423 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden eliminar viatges realitzats'                            |
| 2024-10-09 19:08:10.321538 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:08:11.324106 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:08:11.326293 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:08:11.328455 | SELECT 'Joc de Proves' AS '----------------------- Finalitzacio ---------------------------'                            |
| 2024-10-09 19:08:11.329953 | SELECT event_time, CAST(argument AS CHAR(10000) CHARACTER SET utf8)  as arg  FROM mysql.general_log ORDER BY event_time |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
+-----------------------------------------+
| L'arxiu resultant es troba al directori |
+-----------------------------------------+
| /tmp/agencia21.out                      |
+-----------------------------------------+
+---------------------+
| current_timestamp() |
+---------------------+
| 2024-10-09 19:55:35 |
+---------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:55:35.128 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |       10 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:55:36.136 |
+-------------------------+
+-----------------------------------------+
| TRIGGER                                 |
+-----------------------------------------+
| [ RESPOSTA -1- Error Viatge realitzat ] |
+-----------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:55:36.141 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------+
| TRIGGER                            |
+------------------------------------+
| [ RESPOSTA -2- Error núm places ]  |
+------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:55:37.148 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+----------------------------------+
| TRIGGER                          |
+----------------------------------+
| [ -3- NO RESPOSTA Error Places ] |
+----------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:55:38.154 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------+
| TRIGGER                                        |
+------------------------------------------------+
| [ RESPOSTA -4- Error Supera límit de Places ]  |
+------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:55:40.166 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------------------+
| TRIGGER                                                    |
+------------------------------------------------------------+
| [ RESPOSTA -5- Error viatge realitzat no es pot eliminar ] |
+------------------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:55:42.179 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        5 |
+------+-----------+--------------+--------------+--------------+------+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        5 |
+-------------+------------+----------+
+------------------------------------------------------------------+
| ----------------------- Finalitzacio --------------------------- |
+------------------------------------------------------------------+
| Joc de Proves                                                    |
+------------------------------------------------------------------+
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| event_time                 | arg                                                                                                                     |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 2024-10-09 19:55:35.122010 | SELECT current_timestamp()                                                                                              |
| 2024-10-09 19:55:35.125955 | DELETE FROM Viatges where Codi = 31                                                                                     |
| 2024-10-09 19:55:35.126853 | DELETE FROM Reserves_Viatges where Codi_Viatge=25 AND NIF_Client='39101006V'                                            |
| 2024-10-09 19:55:35.128419 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:55:35.131151 | INSERT INTO Viatges VALUES (31, 'Barcelona', 'New York', 20241110, 20241115, 1200, 10)                                  |
| 2024-10-09 19:55:35.131865 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:55:35.134483 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:55:36.136750 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:55:36.138536 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 5)                                                                 |
| 2024-10-09 19:55:36.138714 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:55:36.139383 | UPDATE Viatges
    SET N_Places = N_Places - NEW.N_Places
    WHERE Codi = NEW.Codi_Viatge                              |
| 2024-10-09 19:55:36.139632 | SELECT '[ RESPOSTA -1- Error Viatge realitzat ]' AS 'TRIGGER'                                                           |
| 2024-10-09 19:55:36.141321 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:55:36.143548 | INSERT INTO Reserves_Viatges VALUES(25, '39101006V', 2)                                                                 |
| 2024-10-09 19:55:36.143734 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:55:36.143883 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden reservar viatges passats'                               |
| 2024-10-09 19:55:36.144390 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:55:37.146889 | SELECT '[ RESPOSTA -2- Error núm places ]' AS 'TRIGGER'                                                                 |
| 2024-10-09 19:55:37.148491 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:55:37.150175 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 7)                                                                 |
| 2024-10-09 19:55:37.150274 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:55:37.150345 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No hi ha places suficients'                                         |
| 2024-10-09 19:55:37.150428 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:55:38.152666 | SELECT '[ -3- NO RESPOSTA Error Places ]' AS 'TRIGGER'                                                                  |
| 2024-10-09 19:55:38.154379 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:55:38.155976 | UPDATE Reserves_Viatges SET N_Places=8 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                              |
| 2024-10-09 19:55:38.156199 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:55:38.156250 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Supera límit de places'                                             |
| 2024-10-09 19:55:38.156337 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:55:38.157971 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:55:39.160713 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:55:39.162894 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:55:40.165019 | SELECT '[ RESPOSTA -4- Error Supera límit de Places ]' AS 'TRIGGER'                                                     |
| 2024-10-09 19:55:40.166713 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:55:40.168282 | UPDATE Reserves_Viatges SET N_Places=50 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                             |
| 2024-10-09 19:55:40.168509 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:55:40.168577 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Supera límit de places'                                             |
| 2024-10-09 19:55:40.168694 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:55:40.170593 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:55:41.172936 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:55:41.174886 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:55:42.177373 | SELECT '[ RESPOSTA -5- Error viatge realitzat no es pot eliminar ]' AS 'TRIGGER'                                        |
| 2024-10-09 19:55:42.179772 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:55:42.181685 | DELETE From Reserves_Viatges where Codi_Viatge = 25 and NIF_Client = '35191937M'                                        |
| 2024-10-09 19:55:42.182481 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden eliminar viatges realitzats'                            |
| 2024-10-09 19:55:42.182738 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:55:43.185101 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:55:43.187196 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:55:43.189040 | SELECT 'Joc de Proves' AS '----------------------- Finalitzacio ---------------------------'                            |
| 2024-10-09 19:55:43.190849 | SELECT event_time, CAST(argument AS CHAR(10000) CHARACTER SET utf8)  as arg  FROM mysql.general_log ORDER BY event_time |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
+-----------------------------------------+
| L'arxiu resultant es troba al directori |
+-----------------------------------------+
| /tmp/agencia21.out                      |
+-----------------------------------------+
+---------------------+
| current_timestamp() |
+---------------------+
| 2024-10-09 19:59:33 |
+---------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:59:33.154 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |       10 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:59:34.160 |
+-------------------------+
+-----------------------------------------+
| TRIGGER                                 |
+-----------------------------------------+
| [ RESPOSTA -1- Error Viatge realitzat ] |
+-----------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:59:34.168 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------+
| TRIGGER                            |
+------------------------------------+
| [ RESPOSTA -2- Error núm places ]  |
+------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:59:35.175 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+----------------------------------+
| TRIGGER                          |
+----------------------------------+
| [ -3- NO RESPOSTA Error Places ] |
+----------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:59:36.181 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        2 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        8 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------+
| TRIGGER                                        |
+------------------------------------------------+
| [ RESPOSTA -4- Error Supera límit de Places ]  |
+------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:59:38.192 |
+-------------------------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        2 |
+------+-----------+--------------+--------------+--------------+------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        8 |
+-------------+------------+----------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------------------------------------------------------------+
| TRIGGER                                                    |
+------------------------------------------------------------+
| [ RESPOSTA -5- Error viatge realitzat no es pot eliminar ] |
+------------------------------------------------------------+
+-------------------------+
| current_timestamp(3)    |
+-------------------------+
| 2024-10-09 19:59:40.204 |
+-------------------------+
+----------+
| SLEEP(1) |
+----------+
|        0 |
+----------+
+------+-----------+--------------+--------------+--------------+------+----------+
| Codi | Origen    | Desti        | Data_Sortida | Data_Tornada | Preu | N_Places |
+------+-----------+--------------+--------------+--------------+------+----------+
|    1 | Barcelona | New York     | 2017-02-07   | 2017-02-14   | 2000 |        7 |
|    2 | Barcelona | Buenos Aires | 2017-02-10   | 2017-02-15   | 1750 |        2 |
|    3 | Barcelona | Tokyo        | 2017-02-14   | 2017-02-21   | 3000 |        3 |
|    4 | Madrid    | Buenos Aires | 2017-02-17   | 2017-02-24   | 1650 |        5 |
|    5 | Barcelona | Calcuta      | 2017-02-27   | 2017-03-05   | 1400 |        4 |
|    6 | Sabadell  | Los Angeles  | 2017-03-15   | 2017-03-30   | 2500 |        8 |
|    7 | Barcelona | Heathrow     | 2017-02-23   | 2029-02-02   | 1900 |        5 |
|    8 | Barcelona | Pekin        | 2017-02-15   | 2017-02-23   | 2750 |        3 |
|    9 | Barcelona | Lima         | 2017-02-16   | 2017-02-22   | 1500 |        6 |
|   10 | Barcelona | Tel-Aviv     | 2017-03-02   | 2017-03-15   |  900 |        7 |
|   11 | Girona    | New York     | 2017-03-13   | 2017-03-19   | 1875 |        4 |
|   12 | Madrid    | Barcelona    | 2017-03-07   | 2017-03-14   |  250 |        2 |
|   13 | Barcelona | Roma         | 2017-02-23   | 2017-03-07   | 1000 |        8 |
|   14 | Madrid    | Barcelona    | 2017-02-17   | 2017-02-23   |  275 |        2 |
|   15 | Barcelona | Madrid       | 2017-03-05   | 2017-03-29   |  300 |        2 |
|   16 | Barcelona | Roma         | 2021-06-03   | 2021-06-17   | 1176 |       16 |
|   17 | Madrid    | Roma         | 2021-06-04   | 2021-06-19   |  523 |       17 |
|   18 | Barcelona | Roma         | 2021-06-05   | 2021-06-20   | 1531 |       17 |
|   19 | Madrid    | Mexico       | 2021-06-05   | 2021-06-20   | 1677 |       27 |
|   20 | Barcelona | Mexico       | 2021-06-06   | 2021-06-21   | 1598 |       14 |
|   21 | Barcelona | La Habana    | 2021-06-07   | 2021-06-22   | 1900 |       30 |
|   22 | Barcelona | La Habana    | 2021-06-08   | 2021-06-23   |  558 |       18 |
|   23 | Barcelona | Buenos Aires | 2021-06-09   | 2021-06-24   | 1890 |       17 |
|   24 | Madrid    | Buenos Aires | 2021-06-10   | 2021-06-25   | 1974 |       27 |
|   25 | Barcelona | Londres      | 2021-06-11   | 2021-06-26   |  891 |       28 |
|   26 | Barcelona | Londres      | 2021-06-12   | 2021-06-27   | 1344 |       14 |
|   27 | Madrid    | Londres      | 2021-06-13   | 2021-06-28   | 1037 |       14 |
|   28 | Roma      | Londres      | 2021-05-20   | 2021-06-04   | 1998 |       16 |
|   29 | Reus      | Winchester   | 2021-08-01   | 2021-08-19   | 1966 |       11 |
|   30 | Barcelona | Buenos Aires | 2021-08-01   | 2021-08-03   | 1080 |       23 |
|   31 | Barcelona | New York     | 2024-11-10   | 2024-11-15   | 1200 |        2 |
+------+-----------+--------------+--------------+--------------+------+----------+
+-------------+------------+----------+
| Codi_Viatge | NIF_Client | N_Places |
+-------------+------------+----------+
|           1 | 34797754P  |        2 |
|           2 | 31456577H  |        3 |
|           3 | 35684125C  |        2 |
|           4 | 34715214L  |        1 |
|           5 | 35876444H  |        2 |
|           6 | 34797754P  |        2 |
|           6 | 42356871J  |        3 |
|           6 | 42578941A  |        1 |
|           7 | 42358910T  |        2 |
|           9 | 42545744K  |        2 |
|          11 | 42578941A  |        1 |
|          12 | 45874525N  |        2 |
|          13 | 46866122B  |        2 |
|          14 | 36911021T  |        2 |
|          15 | 47674768T  |        4 |
|          16 | 43016840D  |        3 |
|          17 | 42218183G  |        3 |
|          18 | 47858522F  |        8 |
|          19 | 35086732W  |        3 |
|          20 | 36623665Y  |        5 |
|          21 | 40084678W  |        3 |
|          22 | 41848260J  |        3 |
|          23 | 40810975M  |        1 |
|          24 | 39101006V  |        2 |
|          25 | 35191937M  |        4 |
|          31 | 40810975M  |        8 |
+-------------+------------+----------+
+------------------------------------------------------------------+
| ----------------------- Finalitzacio --------------------------- |
+------------------------------------------------------------------+
| Joc de Proves                                                    |
+------------------------------------------------------------------+
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| event_time                 | arg                                                                                                                     |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
| 2024-10-09 19:59:33.150724 | SELECT current_timestamp()                                                                                              |
| 2024-10-09 19:59:33.153204 | DELETE FROM Viatges where Codi = 31                                                                                     |
| 2024-10-09 19:59:33.153442 | DELETE FROM Reserves_Viatges where Codi_Viatge=25 AND NIF_Client='39101006V'                                            |
| 2024-10-09 19:59:33.154699 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:59:33.156779 | INSERT INTO Viatges VALUES (31, 'Barcelona', 'New York', 20241110, 20241115, 1200, 10)                                  |
| 2024-10-09 19:59:33.156976 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:59:33.158760 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:59:34.160993 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:59:34.162805 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 5)                                                                 |
| 2024-10-09 19:59:34.162993 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:59:34.163199 | UPDATE Viatges
    SET N_Places = N_Places - NEW.N_Places
    WHERE Codi = NEW.Codi_Viatge                              |
| 2024-10-09 19:59:34.166139 | SELECT '[ RESPOSTA -1- Error Viatge realitzat ]' AS 'TRIGGER'                                                           |
| 2024-10-09 19:59:34.168264 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:59:34.170318 | INSERT INTO Reserves_Viatges VALUES(25, '39101006V', 2)                                                                 |
| 2024-10-09 19:59:34.170518 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:59:34.170629 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden reservar viatges passats'                               |
| 2024-10-09 19:59:34.170812 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:59:35.173045 | SELECT '[ RESPOSTA -2- Error núm places ]' AS 'TRIGGER'                                                                 |
| 2024-10-09 19:59:35.175176 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:59:35.177286 | INSERT INTO Reserves_Viatges VALUES(31, '40810975M', 7)                                                                 |
| 2024-10-09 19:59:35.177517 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:59:35.177648 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No hi ha places suficients'                                         |
| 2024-10-09 19:59:35.177849 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:59:36.180118 | SELECT '[ -3- NO RESPOSTA Error Places ]' AS 'TRIGGER'                                                                  |
| 2024-10-09 19:59:36.181562 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:59:36.183019 | UPDATE Reserves_Viatges SET N_Places=8 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                              |
| 2024-10-09 19:59:36.183339 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:59:36.183487 | UPDATE Viatges
    SET N_Places = N_Places + OLD.N_Places - NEW.N_Places
    WHERE Codi = NEW.Codi_Viatge               |
| 2024-10-09 19:59:36.183646 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:59:36.185570 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:59:37.187549 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:59:37.189455 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:59:38.191397 | SELECT '[ RESPOSTA -4- Error Supera límit de Places ]' AS 'TRIGGER'                                                     |
| 2024-10-09 19:59:38.192970 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:59:38.194422 | UPDATE Reserves_Viatges SET N_Places=50 WHERE Codi_Viatge = 31 AND NIF_Client = '40810975M'                             |
| 2024-10-09 19:59:38.194690 | SELECT N_Places, Data_Sortida INTO places_disponibles, data_sort
    FROM Viatges
    WHERE Codi = NEW.Codi_Viatge      |
| 2024-10-09 19:59:38.194773 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Supera límit de places'                                             |
| 2024-10-09 19:59:38.194898 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:59:38.196457 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:59:39.198778 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:59:39.200517 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:59:40.203091 | SELECT '[ RESPOSTA -5- Error viatge realitzat no es pot eliminar ]' AS 'TRIGGER'                                        |
| 2024-10-09 19:59:40.204916 | SELECT current_timestamp(3)                                                                                             |
| 2024-10-09 19:59:40.207147 | DELETE From Reserves_Viatges where Codi_Viatge = 25 and NIF_Client = '35191937M'                                        |
| 2024-10-09 19:59:40.207491 | SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'No es poden eliminar viatges realitzats'                            |
| 2024-10-09 19:59:40.207640 | SELECT SLEEP(1)                                                                                                         |
| 2024-10-09 19:59:41.210551 | Select * From Viatges                                                                                                   |
| 2024-10-09 19:59:41.212698 | Select * From Reserves_Viatges                                                                                          |
| 2024-10-09 19:59:41.215347 | SELECT 'Joc de Proves' AS '----------------------- Finalitzacio ---------------------------'                            |
| 2024-10-09 19:59:41.217560 | SELECT event_time, CAST(argument AS CHAR(10000) CHARACTER SET utf8)  as arg  FROM mysql.general_log ORDER BY event_time |
+----------------------------+-------------------------------------------------------------------------------------------------------------------------+
